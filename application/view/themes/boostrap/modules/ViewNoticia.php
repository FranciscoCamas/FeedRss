<?php/*-------------------------------------------------------------------\|          Nombre: View.Noticia                          || Responsabilidad: Desplegar la interfaz grafica que ve el usuario   ||          Hereda:                                                   ||        Interfaz:                                                   ||                                                                    |\-------------------------------------------------------------------*///require_once __MODEL__."SelectFromDB.php";require_once "viewEntidad.php";class viewNoticia extends viewEntidad{   public function __construct() {/*    $this->mapMensages  = array(          'NUEVO'      => array( $this->IndCLasMSG => "alert-info",                                 $this->IndMSG     => "Agrege los Datos para Registrar a una nueva Persona"),          'EDITANDO'   => array( $this->IndCLasMSG => "alert-info",                                 $this->IndMSG     => "Editando los datos de la Persona ..."),          'EDITADO'    => array( $this->IndCLasMSG => "alert-info",                                 $this->IndMSG     => "Se actualizo Correctamente la informacion de la persona ..."),          'ELIMINADO'  => array( $this->IndCLasMSG => "alert-warning",                                 $this->IndMSG     => "Se Elimino de forma correcta los datos de la persona"),          'AGREGADO'   => array( $this->IndCLasMSG => "alert-success",                                 $this->IndMSG     => "Se Agregaron correctamente los datos de la persona"),          'LISTADO'    => array( $this->IndCLasMSG => "alert-success",                                 $this->IndMSG     => "Desplegando la lista de las personas"),          'ERROR'      => array( $this->IndCLasMSG => "alert-danger",                                 $this->IndMSG     => "Algo fallo, consulte al soporte tecnico" ) ,          'SINMENSAGE' => array( $this->IndCLasMSG => "",                                 $this->IndMSG     => "" )                                 );*/}public function ListadoConbuscador( $txtsearch = ""){$tablaBuscadorCampo  ="<div class='input-group'>";$tablaBuscadorCampo .= $this->GenerInputText("editbox_searchNoticia","Busque un Noticia","input-lg")."&nbsp;&nbsp;&nbsp;&nbsp;";$tablaBuscadorCampo .= $this->GeneraBotom("BuscaNoticia", "doSearchNoticia()","BUSCAR","btn btn-primary","glyphicon glyphicon-search" ,"Busque un Noticia");$tablaBuscadorCampo .= $this->GeneraAnclaEstiloBotom("VerNoticia","VerTodoNoticia()","VER TODO","btn btn-success","glyphicon glyphicon-refresh","","Despliege todos los Noticia");$tablaBuscadorCampo .= $this->GeneraAnclaEstiloBotom("AgregarNoticia","DespliegaAgregaNoticia()","Agregar Noticia","btn btn-warning","glyphicon glyphicon-user","","Agrega un Noticia");$tablaBuscadorCampo .= $this->GeneraAnclaEstiloBotom("ExportarExcelNoticia","ExportarExcelNoticia()","Exportar Excel","btn btn-success","glyphicon glyphicon-floppy-save","","Exporte a Excel la lista de Folios");$tablaBuscadorCampo .= "<div id='ExpExcelNoticia' class='ExpExcelNoticia'> </div>";$tablaBuscadorCampo .=" </div> ";$tablaBuscadorCampo .= $this->GeneraModalFormPrintNoticia( ) ;$tablaBuscadorCampo .= $this->GeneraModalErrorPrint( ) ;$tablaBuscadorCampo .= $this->GeneraDiv('oneSpin','','');$tablaBuscadorCampo .="<div id='jsGridNoticia'></div>";$tablaBuscadorCampo .= "<div id='externalPagerNoticia' class='external-pager'>  </div>"; return $tablaBuscadorCampo;}public function GeneraModalFormPrintNoticia(){ $unModal = ""; $unModal.= $this->GeneraModalFormPrintHeader("myModalForm"); $unModal.= $this->GeneraAgregarNoticia(); $unModal.= $this->GeneraModalFormPrintFootherHeader( ) ; $unModal.= $this->GeneraBotom("AgregaNoticia",    "AgregaNoticia()","Agregar",   "btn btn-warning","glyphicon glyphicon-copy","Agrega un Noticia" ); $unModal.= $this->GeneraBotom("ActualizaNoticia", "updateNoticia()","Actualizar","btn btn-primary","glyphicon glyphicon-copy","Actualiza los datos del Noticia" ); $unModal.=$this->GeneraModalFormPrintFootherInicio( ) ; return $unModal;}public function ImprimeListaEnEXcelNoticia( $listaC ){header('Content-Type: text/html; charset=iso-8859-1');require_once "/../reportes/CreaExcelNoticia.php"; $unExcel = new ExcelNoticia(); /* Encabezados del reporte */ $listaHeader = array( " Titulo "," Fecha "," Categoria "," Url "," Descripcion "," Noticia " ); /* Campos de la base de datos para el reporte */ $listaCampos = array( "Titulo","Fecha","Categoria","Url","Descripcion","Noticia" ); return $unExcel->CreaExcelNoticia( $listaC, $listaHeader, $listaCampos);}public function GeneraAgregarNoticia(  ){ $AgregarAsig     = ""; $unInputGrupSize = "input-group input-group-lg"; $unInputGrupSize = ""; $sType           = "text";//"number"; // text email $AgregarAsig.= $this->GeneraTextInputBostrapConIcono("Titulo","Encabezado Titulo" ,"Ayuda Titulo","glyphicon-user",$sType,$unInputGrupSize); $AgregarAsig.= $this->GeneraTextInputBostrapConIcono("Fecha","Encabezado Fecha" ,"Ayuda Fecha","glyphicon-user",$sType,$unInputGrupSize); $AgregarAsig.= $this->GeneraTextInputBostrapConIcono("Categoria","Encabezado Categoria" ,"Ayuda Categoria","glyphicon-user",$sType,$unInputGrupSize); $AgregarAsig.= $this->GeneraTextInputBostrapConIcono("Url","Encabezado Url" ,"Ayuda Url","glyphicon-user",$sType,$unInputGrupSize); $AgregarAsig.= $this->GeneraTextInputBostrapConIcono("Descripcion","Encabezado Descripcion" ,"Ayuda Descripcion","glyphicon-user",$sType,$unInputGrupSize); $AgregarAsig.= $this->GeneraTextInputBostrapConIcono("Noticia","Encabezado Noticia" ,"Ayuda Noticia","glyphicon-user",$sType,$unInputGrupSize);/* $AgregarAsig .= "<h5>".utf8_decode( "Genero")." </h3> ";   $AgregarAsig .= "<div class='input-group'>";   $AgregarAsig .= " <span class='input-group-addon'> <span class='glyphicon glyphicon-book'> </span> </span>";   $AgregarAsig .= " <select class='form-control' id='Genero'>";   $AgregarAsig .= "   <option>"."Femenino"." </option>";   $AgregarAsig .= "   <option>"."Masculino"." </option>";   $AgregarAsig .= " </select>";   $AgregarAsig .= "</div> ";*/ $AgregarAsig .= " <input type='hidden' id='id' value=0 />"; return $AgregarAsig;}public function ImprimeNoticia($sDatosNoticia = null ,  $sMsg = "Editando"){ if ( !isset($sDatosNoticia  ) )      $sDatoNoticia = null; if ( !is_array($sDatosNoticia ) )  $sDatoNoticia = null;  else {   /* Se valida si solo se paso algun arreglo parcial*/  //if ( isset( $sDatosNoticia['referencia']  ) )  //     $sDatosNoticia= $sDatosNoticia['referencia'] ;  /* Bandera para unificar el arreglo*/  if ( !isset( $sDatosNoticia['idNoticia']  ) )       $sDatosNoticia = null; } /* */ if ( $sDatosNoticia== null) {   /*   `IDViewNoticia`, `idNoticia`, `idResive`, `idEntrega`,   `Importe`, `Aplicado`, `Cambio`, `Descripcion`, `idConcepto`, `idRegistro`,   `Fecha`, `EnAcientos`, `Concepto`,   `Nombre`, `ApellidoPaterno`, `ApellidoMaterno`, `referencia`, `DesRegistro`, `NombreEntrega`  */   $sNombresBase  =  "";   $sNombresBase .="IDViewNoticia|idNoticia|idResive|idEntrega|NombreResive|";    $sNombresBase .="Titulo|Fecha|Categoria|Url|Descripcion|Noticia|";   $sNombresBase .="DespliegaMSG|";    // IDemitida|Emitida;   $sDatosNoticia = $this->GetArrayFromNombres($sNombresBase );    // Valores por omicion para que sean numeros;   $sDatoNoticia["Importe"]   = 0; };  if ( $sDatosNoticia["DespliegaMSG"] == "");        $sDatosNoticia["DespliegaMSG"] = $sMsg; //$sDatosNoticia["IDentrada"] =$DatosRegistro["IDentrada"];;/*\__________PASAMOS EL ARREGLO A MAYUSCULAS________\*/;// $sDatosNoticia = array_map('strtoupper', $sDatoAsiento); /*\_________________________________________________\*/;  $NombresValiables = "Importe|Aplicado|Cambio";  Formato_PesosFromArray($sDatosNoticia, $NombresValiables  ); if ( $sDatosNoticia['idEntrega'] == "" ) {  $ejecutivo =""; } $sDatosNoticia['idEntrega'] = $_SESSION["UserId"]; //$SelTipoCaja    = TextoABool ( $sDatosNoticia['EnAcientos'] ); //$SelNoTipoCaja  = NiegaUnBool( $SelTipoCaja ) ; //$NomTipoCaja    = "TipoCaja";   /* Esta funcion le dice a PHP que lo que sige sera interpetado y guardado en un vector */ ?> <?php ob_start(); ?><ul class="nav nav-tabs">  <li class="active"><a data-toggle= "tab" href= "#home">Datos del Alumno(a)</a></li>  <!--  <li><a data-toggle="tab" href="#menu1">Noticia</a></li> --></ul> <fieldset> <?php //echo $this->ImprimeMensage(  $sDatosNoticia["DespliegaMSG"]  ) ; ?> </fieldset><div class="panel-body"><div id="myForm" name="myForm" > <div class="tab-content">  <div id="home" class="tab-pane fade in active">      <h3>Datos del Noticia</h3>  <fieldset>    <!-- Se pueden generar los controles y asignales el valor de array(creador de formularios: http://getbootstrap.com/css/#forms-control-sizes) --> <div class='form-group'>  <label for='ClaveProfesor' class='control-label col-sm-2'>Titulo</label>   <div class='col-sm-10'>  <input class='form-control' name='Titulo' id='Titulo' placeholder='Titulo' required='' type='text'  value="<?php echo $sDatoNoticia['Titulo']; ?>" >   </div> </div> <div class='form-group'>  <label for='ClaveProfesor' class='control-label col-sm-2'>Fecha</label>   <div class='col-sm-10'>  <input class='form-control' name='Fecha' id='Fecha' placeholder='Fecha' required='' type='text'  value="<?php echo $sDatoNoticia['Fecha']; ?>" >   </div> </div> <div class='form-group'>  <label for='ClaveProfesor' class='control-label col-sm-2'>Categoria</label>   <div class='col-sm-10'>  <input class='form-control' name='Categoria' id='Categoria' placeholder='Categoria' required='' type='text'  value="<?php echo $sDatoNoticia['Categoria']; ?>" >   </div> </div> <div class='form-group'>  <label for='ClaveProfesor' class='control-label col-sm-2'>Url</label>   <div class='col-sm-10'>  <input class='form-control' name='Url' id='Url' placeholder='Url' required='' type='text'  value="<?php echo $sDatoNoticia['Url']; ?>" >   </div> </div> <div class='form-group'>  <label for='ClaveProfesor' class='control-label col-sm-2'>Descripcion</label>   <div class='col-sm-10'>  <input class='form-control' name='Descripcion' id='Descripcion' placeholder='Descripcion' required='' type='text'  value="<?php echo $sDatoNoticia['Descripcion']; ?>" >   </div> </div> <div class='form-group'>  <label for='ClaveProfesor' class='control-label col-sm-2'>Noticia</label>   <div class='col-sm-10'>  <input class='form-control' name='Noticia' id='Noticia' placeholder='Noticia' required='' type='text'  value="<?php echo $sDatoNoticia['Noticia']; ?>" >   </div> </div>  </fieldset> </div>   <div id='menu1' class='tab-pane fade'>     <h3>Lista de  Noticia</h3> <?php /*  Posible Listado */       /*        $sDatosyDetalle  =$this->GeneraAnclaEstiloBotom(....);        $sDatosyDetalle.= $this->ListadoConbuscadorAlumnos();        $sDatosyDetalle.= $this->LoadFuncionFromJQ("CargaTodosAlumnos()");        $sDatosyDetalle.= $this->GeneratxtSearchEnter("editbox_searchAlumno","doSearchAlumno");         echo $sDatosyDetalle;        */         ?>   </div> </div></div></div> <?php $contenido = ob_get_clean() ?> <?php /* Fin de  ejecucion de codigo PHP*/ unset( $sDatosNoticia ); return $contenido;}}?>