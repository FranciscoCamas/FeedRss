var NombreControlador   = "Feed";var contenedorVista     = "#content";var IndiceFeed      = 0;var _DirMod_        = "application/view/themes/boostrap/modules/";var _DirRepFeed_    = "application/controller/Feeds/";var _NomGridFeed_ = "jsGrid"+"Feed";function getFieldsFeed(){return [  { name: "Image_link",     title: "Image_link",  type: "text", width: 100,  sorting: false, filtering: false }, { name: "Image_title",    title: "Image_title",  type: "text", width: 100,  sorting: false, filtering: false }, { name: "Image_url",      title: "Image_url",  type: "text", width: 100,  sorting: false, filtering: false }, { name: "Image_width",    title: "Image_width",  type: "text", width: 100,  sorting: false, filtering: false }, { name: "Image_height",   title: "Image_height",  type: "text", width: 100,  sorting: false, filtering: false }, { name: "Imagelink",      title: "Imagelink",  type: "text", width: 100,  sorting: false, filtering: false }, { name: "Permalink",      title: "Permalink",  type: "text", width: 100,  sorting: false, filtering: false }, { name: "Title",          title: "Title",  type: "text", width: 100,  sorting: false, filtering: false }, { name: "Description",    title: "Description",  type: "text", width: 100,  sorting: false, filtering: false }, { name: "Sourcepermalink",title: "Sourcepermalink",  type: "text", width: 100,  sorting: false, filtering: false }, { name: "Sourcetitle",    title: "Sourcetitle",  type: "text", width: 100,  sorting: false, filtering: false }, { name: "Date",           title: "Date",  type: "text", width: 100,  sorting: false, filtering: false }, { name: "Categories",     title: "Categories",  type: "text", width: 100,  sorting: false, filtering: false }];}var fieldsIndiceFeed = [    { name: "#",   title: "#", align: "center",  width:45,    itemTemplate:  function(_, item){ IndiceFeed++; return IndiceFeed;}   }];function getFeedBase(){let FeedObj = {     Image_link:"",     Image_title:"",     Image_url:"",     Image_width:"",     Image_height:"",     Imagelink:"",     Permalink:"",     Title:"",     Description:"",     Sourcepermalink:"",     Sourcetitle:"",     Date:"",     Categories:""};return FeedObj;}function DelAllFeed(){ let resultado = confirm("Realmente desea borrar?"); if (resultado == true){  let FeedDatos  = getFeedFromForm  ();  let aresponseText = GetDataFrom("DEL", _DirRepFeed_, FeedDatos);  VerTodoFeed();  delete aresponseText; delete FeedDatos; } delete resultado; }function UpdateAllFeed(linkFeed){ let FeedDatos  = getFeedBase  (); if(linkFeed =="") FeedDatos.sFeed = $('#editboxBuscaFeed').val(); else  FeedDatos.sFeed =linkFeed;    if( FeedDatos.sFeed!=""){  let aresponseText = GetDataFrom("RSS", _DirRepFeed_, FeedDatos);   VerTodoFeed();   delete aresponseText;  }else{   alert( "La fuente del Feed no puede ser vacia.");   $('#editboxBuscaFeed').focus();  }  delete FeedDatos;}function OrdenaNoticias(){ VerTodoFeed();}function VerTodoFeed(){IndiceFeed = 0;let NombreFeedABuscar = getFeedBase();NombreFeedABuscar.sOrdenaMe = $('#Ordenar').val();$("#"+_NomGridFeed_).jsGrid("openPage", 1);CargaGridWithPaginacion(_NomGridFeed_,_DirRepFeed_,NombreFeedABuscar,"_" );delete NombreFeedABuscar;}function doSearchFeed(){IndiceFeed = 0;let NombreFeedABuscar = getFeedBase();NombreFeedABuscar.sBuscame = $('#editbox_searchFeed').val();$("#"+_NomGridFeed_).jsGrid("openPage", 1);CargaGridWithPaginacion(_NomGridFeed_,_DirRepFeed_,NombreFeedABuscar,"_" );delete NombreFeedABuscar;}function doSearchFeedEsp(buscame){IndiceFeed = 0;let NombreFeedABuscar = getFeedBase();NombreFeedABuscar.sBuscame = buscame;$("#"+_NomGridFeed_).jsGrid("openPage", 1);CargaGridWithPaginacion(_NomGridFeed_,_DirRepFeed_,NombreFeedABuscar,"_" );delete NombreFeedABuscar;}function doSearchFeedFecha(buscame){IndiceFeed = 0;let NombreFeedABuscar = getFeedBase();let curDate = new Date();let Limite= 10;if( buscame.length == "") buscame =  curDate.toISOString().slice(0, Limite);elseif( buscame.length != 10){   Limite= 8;  if(buscame =="mesant")    curDate.setMonth(curDate.getMonth()-1);        buscame =  curDate.toISOString().slice(0, Limite);     }     NombreFeedABuscar.sBuscame = buscame;$("#"+_NomGridFeed_).jsGrid("openPage", 1);CargaGridWithPaginacion(_NomGridFeed_,_DirRepFeed_,NombreFeedABuscar,"_" );delete NombreFeedABuscar;delete curDate;delete Limite;}function CargaTodosFeed(){ configuraGridTextPage(_NomGridFeed_,"externalPagerFeed" ); configuraGrid(_NomGridFeed_,false,true,true,     true,     true,   10,       5);   $("#" + _NomGridFeed_).jsGrid({                                              fields:   {  name: "hola",title: "Ultimas noticias" }, //newFieldsArray,                     onPageChanged: function(args) { IndiceFeed= ( args.pageIndex-1) * 10; },                       onRefreshed: function(args) { IndiceFeed= 0;},                      rowRenderer: function(item) {                                          let  rowdes= "</br> <div class='card'>";                                               rowdes+= "<div class='media'>";                                               rowdes+= "<a class='pull-left' href='"+item.Permalink+"'>";                                               rowdes+= "<img class='media-object' src='"+item.Imagelink+"' title='" + item.Image_title + "'  width='135' height='135'>";                                               rowdes+= "</a>";                                               rowdes+= "<div class='media-body'>";                                               rowdes+= "<h4 class='media-heading'><a href='"+item.Permalink+"'>"+item.Title+"</a></h4>";                                               rowdes+= "<p>"+item.Description+"</p>";                                               rowdes+= "<ul class='list-inline list-unstyled'>";                                               rowdes+= "<li><span><i class='glyphicon glyphicon-calendar'></i> "+item.Date+" </span></li>";                                               rowdes+= "<li>|</li>";                                               rowdes+= "<span><i class='glyphicon glyphicon-comment'></i> 2 comments</span>";                                               rowdes+= "<li>|</li>";                                               rowdes+= "<li>";                                               rowdes+= "<span class='glyphicon glyphicon-star'></span>";                                               rowdes+= "<span class='glyphicon glyphicon-star'></span>";                                               rowdes+= "<span class='glyphicon glyphicon-star'></span>";                                               rowdes+= "<span class='glyphicon glyphicon-star'></span>";                                               rowdes+= "<span class='glyphicon glyphicon-star-empty'></span>";                                               rowdes+= "</li>";                                               rowdes+= "<li>|</li>";                                               rowdes+= "<li>";                                               rowdes+= "<span><i class='fa fa-facebook-square'></i></span>";                                               rowdes+= "<span><i class='fa fa-twitter-square'></i></span>";                                               rowdes+= "<span><i class='fa fa-google-plus-square'></i></span>";                                               rowdes+= "</li>";                                               rowdes+= "</ul>";                                               rowdes+="<p class='footnote'>Fuente:";                                               rowdes+= "<a href='"+item.Sourcepermalink+"'>"+item.Sourcetitle+"</a> | "+item.Date+""+"<br>";                                               rowdes+= "</p>";                                               rowdes+= "</div>";                                               rowdes+= "</div>";                                               rowdes+= "</div>";             return $("<tr>").append($("<td>").append(rowdes ));                  },  }); IndiceFeed = 0; CargaGridWithPaginacion(_NomGridFeed_,_DirRepFeed_,getFeedBase(),"_" );}$(document).ready(function(){  CargaTodosFeed();   getEnterSearch("editbox_searchFeed",doSearchFeed,'');})